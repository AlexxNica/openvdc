syntax = "proto3";

package api;

option go_package = "github.com/axsh/openvdc/api";

import "model.proto";

service Instance {
  rpc Create (CreateRequest) returns (CreateReply){}
	rpc Run (RunRequest) returns (RunReply){}
	rpc StopTask (StopTaskRequest) returns (StopTaskReply){}
}

message RunRequest{
	string imageName = 1;
	string hostName = 2;
	string taskType = 3;
}
message RunReply {
  string instance_id = 1;
  string resource_id = 2;
}

message StopTaskRequest{
        string hostName = 1;
        string taskType = 2;
}
message StopTaskReply {
  string instance_id = 1;
}

message CreateRequest{
  string resource_id = 1;
}
message CreateReply{
  string instance_id = 1;
}

service Resource {
  rpc Register(ResourceRequest) returns (ResourceReply){}
  rpc Unregister(ResourceIDRequest) returns (ResourceReply){}
}

message ResourceRequest {
  oneof Template {
    model.NoneTemplate none = 500;
    model.VMTemplate vm = 501;
  }
}
message ResourceReply {
  string ID = 1;
}

message ResourceIDRequest{
  oneof Key {
    string ID = 1;
    string Name = 2;
  }
}
